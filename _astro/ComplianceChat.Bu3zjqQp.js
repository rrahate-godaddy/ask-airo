import{j as s,C as Ue,M as Se,T as Le,I as Ie}from"./TypingIndicator.BcwqQt7Y.js";import{r as y}from"./index.DK-fsZOb.js";import{r as ie}from"./responses.DAZW9Fho.js";/* empty css                      */import{L as Ee}from"./LoadingOverlay.D8xz2cxv.js";function qe(){const[L,i]=y.useState([]),[ne,n]=y.useState(!1),[w,A]=y.useState(!1),[T,O]=y.useState(null),[B,v]=y.useState(!1),[l,x]=y.useState({name:"Yngwie's Guitars",email:"info@yngwiesfrets.com",jurisdiction:"Illinois",coppaCompliance:!1}),[$,N]=y.useState(!1),[d,f]=y.useState(null),[V,b]=y.useState(0),[k,g]=y.useState(!1),[oe,Q]=y.useState(!1),[re,K]=y.useState([]),[_e,Me]=y.useState(!1),[U,ae]=y.useState([]);y.useEffect(()=>{fetch("/ask-airo/data/responses.json").then(t=>t.json()).then(t=>{ae(t),console.log("Fetched responses:",t)}).catch(t=>{console.error("Error fetching responses:",t)})},[]);const u=(e,t,o)=>{const r={question:e,answer:t,timestamp:new Date,field:o},m=[...re,r];K(m);try{localStorage.setItem("complianceResponses",JSON.stringify(m))}catch(h){console.error("Error saving compliance responses to localStorage:",h)}console.log("Compliance response captured:",r),console.log("All compliance responses:",m)};y.useEffect(()=>{try{const e=localStorage.getItem("complianceResponses");if(e){const t=JSON.parse(e,(o,r)=>o==="timestamp"?new Date(r):r);K(t),console.log("Loaded saved compliance responses:",t)}}catch(e){console.error("Error loading compliance responses from localStorage:",e)}},[]),y.useEffect(()=>{k&&!B&&(console.log("Privacy policy is generated but canvas is not visible - fixing this"),v(!0)),B&&!k&&!$&&!d&&console.log("Canvas is visible but has no content to display - ensuring proper state")},[k,B,$,d]),y.useEffect(()=>{k&&(console.log("Privacy policy generated, ensuring canvas is visible"),v(!0))},[k]),y.useEffect(()=>{let e=ie.find(t=>t.trigger==="COMPLIANCE_WELCOME")?.reply;!e&&U.length>0&&(e=U.find(t=>t.trigger==="COMPLIANCE_WELCOME")?.reply),e||(e="Hi, it looks like your site's missing a few key terms and policies. Take a look at what I recommend adding, and I'll help you create the right documents for your business."),e&&i([{text:e,isUser:!1,ctaButtons:[{label:"Terms of Service",onClick:()=>q(),variant:"secondary"},{label:"Privacy Policy",onClick:()=>Y(),variant:"secondary"},{label:"Why do I need these?",onClick:()=>ye(),variant:"secondary"}]}])},[U]);const q=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Terms of Service",isUser:!0,ctaButtons:void 0}]),u("Terms of Service requested","User selected Terms of Service option","terms_request"),A(!0),O("terms"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"I can help you create a Terms of Service agreement for your business. This document outlines the rules and guidelines for using your website or service.",isUser:!1,ctaButtons:void 0}]),setTimeout(()=>{n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Let's gather some information about your business to create customized Terms of Service. Please provide the following details:",isUser:!1,ctaButtons:[{label:"Use Existing Info",onClick:()=>le(),variant:"primary"},{label:"Start Fresh",onClick:()=>ce(),variant:"secondary"}]}])},800)},1200)},1e3)},le=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Use Existing Info",isUser:!0,ctaButtons:void 0}]),u("Use existing business info for Terms of Service","Confirmed","terms_use_existing_info"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:`I'll create Terms of Service for ${l.name} based on the information you've already provided.`,isUser:!1,ctaButtons:void 0}]),j(l.name,"",""),setTimeout(()=>{n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"What is your website URL? This will be included in the Terms of Service. You can enter it in the form panel, or type your response below.",isUser:!1,ctaButtons:void 0}])},800)},1200)},1e3)},ce=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Start Fresh",isUser:!0,ctaButtons:void 0}]),u("Start fresh for Terms of Service","Confirmed","terms_start_fresh"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Let's create Terms of Service from scratch. What is your business name? You can enter it in the form panel, or type your response below.",isUser:!1,ctaButtons:void 0}])},1e3)},j=(e,t,o)=>{const r=document.querySelector('.terms-form input[placeholder="Company Name"]'),m=document.querySelector('.terms-form input[placeholder="Website URL"]'),h=document.querySelector(".terms-form textarea");r&&(r.value=e),m&&(m.value=t),h&&(h.value=o)},Y=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Privacy Policy",isUser:!0,ctaButtons:void 0}]),u("Privacy Policy requested","User selected Privacy Policy option","privacy_request"),g(!1),b(0),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Let's work together on your Privacy Policy.",isUser:!1,ctaButtons:void 0}]),n(!0),setTimeout(()=>{n(!1),Q(!0),v(!0),N(!1),setTimeout(()=>{Q(!1)},500),i(e=>[...e,{text:"Please confirm if the information shown on the right is correct",isUser:!1,ctaButtons:[{label:"Confirm",onClick:()=>D(),variant:"primary"},{label:"Edit",onClick:()=>G(),variant:"secondary"}]}])},1e3)},1e3)},I=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Edit Information",isUser:!0,ctaButtons:void 0}]),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"What information would you like to edit?",isUser:!1,ctaButtons:[{label:"Business Info",onClick:()=>ue(),variant:"secondary"},{label:"COPPA Compliance",onClick:()=>P(),variant:"secondary"}]}])},800)},ue=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Business Info",isUser:!0,ctaButtons:void 0}]),G()},S=(e,t)=>{x(o=>({...o,[e]:t})),u(`Updated ${e}`,t,e),n(!0),setTimeout(()=>{n(!1);const o=e==="jurisdiction"?`Thank you! I've updated your business jurisdiction to "${t}".`:`Thank you! I've set your business ${e} to "${t}".`;i(r=>[...r,{text:o,isUser:!1,ctaButtons:void 0}]),d===e&&f(null),setTimeout(()=>{e==="name"?E():e==="email"?F():e==="jurisdiction"&&P()},800)},800)},D=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Confirm",isUser:!0,ctaButtons:void 0}]),u("Privacy policy information confirmed",`Name: ${l.name}, Email: ${l.email}, Jurisdiction: ${l.jurisdiction}, COPPA: ${l.coppaCompliance}`,"policy_confirm"),f(null),g(!1),v(!0),N(!0),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Great! I'm generating your Privacy Policy now...",isUser:!1,ctaButtons:void 0}]),setTimeout(()=>{N(!1),g(!0),setTimeout(()=>{n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Your Privacy Policy is ready! You can view it on the right, and download, copy, or email it using the buttons provided.",isUser:!1,ctaButtons:[{label:"Edit Something Else",onClick:()=>I(),variant:"secondary"}]}])},800)},500)},2e3)},500)},G=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Edit",isUser:!0,ctaButtons:void 0}]),b(1),f("name"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:`Is your business name "${l.name}"?`,isUser:!1,ctaButtons:[{label:"Confirm",onClick:()=>de(),variant:"primary"},{label:"Edit",onClick:()=>X(),variant:"secondary"}]}])},500)},de=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Confirm",isUser:!0,ctaButtons:void 0}]),E()},X=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Edit",isUser:!0,ctaButtons:void 0}]),f("name"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Please update your business name in the form on the right, or type your response below.",isUser:!1,ctaButtons:void 0}])},500)},E=()=>{b(2),f("email"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:`Is your business email "${l.email}"?`,isUser:!1,ctaButtons:[{label:"Confirm",onClick:()=>me(),variant:"primary"},{label:"Edit",onClick:()=>Z(),variant:"secondary"}]}])},500)},me=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Confirm",isUser:!0,ctaButtons:void 0}]),F()},Z=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Edit",isUser:!0,ctaButtons:void 0}]),f("email"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Please update your business email in the form on the right, or type your response below.",isUser:!1,ctaButtons:void 0}])},500)},F=()=>{b(3),f("jurisdiction"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:`Confirm that your business's legal jurisdiction is ${l.jurisdiction}? This is the state where you primarily do business. You can update this in the form on the right, or type your response below.`,isUser:!1,ctaButtons:[{label:"Confirm",onClick:()=>pe(),variant:"primary"},{label:"Edit",onClick:()=>ee(),variant:"secondary"}]}])},500)},pe=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Confirm",isUser:!0,ctaButtons:void 0}]),u("Confirmed jurisdiction",l.jurisdiction,"jurisdiction"),P()},ee=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Edit",isUser:!0,ctaButtons:void 0}]),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Please update your business jurisdiction in the form on the right, or type your response below.",isUser:!1,ctaButtons:void 0}])},500)},fe=()=>{if(i(t=>{const o=t.map(h=>({...h,ctaButtons:void 0}));o[o.length-1];let r=o,m="";return d==="name"?m=`Updated business name to "${l.name}"`:d==="email"?m=`Updated business email to "${l.email}"`:d==="jurisdiction"&&(m=`Updated jurisdiction to "${l.jurisdiction}"`),r.push({text:m,isUser:!1,ctaButtons:void 0}),r}),d){let t="";d==="name"?t=l.name:d==="email"?t=l.email:d==="jurisdiction"&&(t=l.jurisdiction),u(`Updated ${d}`,t,d)}const e=d;f(null),e==="name"?E():e==="email"?F():e==="jurisdiction"&&P()},he=()=>{f(null),V===1?G():V===2&&E()},ye=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Why do I need these?",isUser:!0,ctaButtons:void 0}]),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:`<div class="compliance-explanation">
          <p class="font-regular text-gray-800 mb-4">Small businesses should have a Privacy Policy and Terms of Use on their website to build trust, ensure legal compliance, and protect their operations.<br /><br /></p>
          
          <div class="mb-3">
            <p class="font-semibold text-gray-800 mb-1">Privacy Policy</p>
            <p class="text-gray-700">A Privacy Policy informs visitors about how their data is collected, used, and protectedâ€”helping the business comply with applicable privacy laws.</p>
          </div>
          
          <div class="mb-3">
            <p class="font-semibold text-gray-800 mb-1">Terms of Use</p>
            <p class="text-gray-700">Terms of Use set the rules for how users can interact with the site, limit the business's liability, and protect intellectual property.</p>
          </div>
          
          <p class="font-regular text-gray-800 mt-4">Together, these documents create a clear legal framework that safeguards both the business and its customers.</p>
        </div>`,isUser:!1,ctaButtons:[{label:"Terms of Service",onClick:()=>q(),variant:"secondary"},{label:"Privacy Policy",onClick:()=>Y(),variant:"secondary"}]}])},1e3)},ve=e=>{const t=e.toLowerCase();return t.includes("privacy")||t.includes("privacy policy")?{isCompliance:!0,type:"privacy"}:t.includes("terms")||t.includes("terms of use")?{isCompliance:!0,type:"terms"}:{isCompliance:!1,type:null}},xe=e=>{const t=e.toLowerCase().trim();return["yes","y","yeah","yep","correct","true"].includes(t)?(C(!0),!0):["no","n","nope","false","incorrect"].includes(t)?(C(!1),!0):!1},_=e=>{if(!e)return!1;const t=e.text.toLowerCase();return t.includes("please update your business name")||t.includes("what is your business name")||t.includes("please update your business email")||t.includes("what is your business email")||t.includes("please update your business jurisdiction")||t.includes("what jurisdiction")||t.includes("where is your business located")||t.includes("does your business primarily serve children")||t.includes("do you need to comply with the children's online privacy protection act")||t.includes("coppa compliance")||t.includes("what is your website url")||t.includes("could you please describe the services")||t.includes("what services does your business provide")||t.includes("let's create terms of service from scratch")||t.includes("i've set your business name to")||t.includes("i've updated your business name to")||t.includes("i've set your business email to")||t.includes("i've updated your business email to")||t.includes("i've updated your business jurisdiction to")||t.includes("i've set your business jurisdiction to")||t.includes("thanks! i've set your business name to")||t.includes("thanks! i've added")||t.includes("thank you! i've updated your business")||t.includes("thank you! i've set your business")||t.includes("thank you! i've set your business coppaCompliance to")},be=e=>{if(!e)return null;const t=e.text.toLowerCase();return t.includes("business name")||t.includes("company name")?"name":t.includes("business email")||t.includes("contact email")?"email":t.includes("jurisdiction")||t.includes("where is your business located")?"jurisdiction":t.includes("website url")||t.includes("your website")?"website":t.includes("services")||t.includes("what does your business provide")?"services":null},Ce=e=>{const t=e.toLowerCase().trim();return t==="open canvas"?(v(!0),n(!0),setTimeout(()=>{i(o=>[...o,{text:"Opening the canvas for you.",isUser:!1,ctaButtons:void 0}]),n(!1)},500),!0):t==="close canvas"?(v(!1),n(!0),setTimeout(()=>{i(o=>[...o,{text:"Closing the canvas for you.",isUser:!1,ctaButtons:void 0}]),n(!1)},500),!0):!1},ge=e=>{const t=e.toLowerCase(),o=ie.find(r=>new RegExp(r.trigger,"i").test(t));if(o)return o.reply;if(U.length>0){const r=U.find(m=>new RegExp(m.trigger,"i").test(t));if(r)return r.reply}return"I'm not sure how to respond to that."},te=e=>{i(o=>o.map(r=>({...r,ctaButtons:void 0})));const t=e?"Great! Your email is confirmed.":"Please provide your correct email address.";i(o=>[...o,{text:t,isUser:!1,ctaButtons:void 0}])},J=()=>{n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"What would you like to edit?",isUser:!1,ctaButtons:[{label:"Business Name",onClick:()=>H("name"),variant:"secondary"},{label:"Website URL",onClick:()=>H("website"),variant:"secondary"},{label:"Services",onClick:()=>H("services"),variant:"secondary"}]}])},800)},H=e=>{i(o=>o.map(r=>({...r,ctaButtons:void 0})));const t=e==="name"?"Business Name":e==="website"?"Website URL":"Services";i(o=>[...o,{text:t,isUser:!0,ctaButtons:void 0}]),w||(A(!0),O("terms")),n(!0),setTimeout(()=>{n(!1),i(o=>[...o,{text:`Please update the ${t.toLowerCase()} in the form panel, or type your response below.`,isUser:!1,ctaButtons:void 0}])},800)},je=()=>{const e=[...L].reverse().find(t=>!t.isUser&&t.ctaButtons&&t.ctaButtons.length>0);if(e?.ctaButtons){const t=e.ctaButtons.find(o=>{const r=o.label.toLowerCase();return r==="edit"||r.includes("edit")||r==="change"||r.includes("change")||r==="modify"||r.includes("modify")||r==="update"||r.includes("update")||r==="edit information"||r==="edit more info"||r==="edit more"});if(t)return u("Edit requested via text input","edit","text_edit_command"),t.onClick(),!0}return!1},we=e=>{if(!e.trim())return;i(a=>[...a,{text:e,isUser:!0,ctaButtons:void 0}]);const t=e.toLowerCase().trim(),o=[...L].reverse().find(a=>!a.isUser);if(["edit","change","modify","update"].includes(t)||t==="edit information"||t==="edit more"||t==="edit more info"){if(je())return;if(o){const a=o.text.toLowerCase();if(a.includes("business name")||a.includes("company name")){X();return}else if(a.includes("business email")||a.includes("email address")){Z();return}else if(a.includes("jurisdiction")||a.includes("where your business")){ee();return}else if(a.includes("coppa")||a.includes("children")){P();return}else if(a.includes("privacy policy")||a.includes("information")&&a.includes("right")){I();return}else if(a.includes("terms of service")||a.includes("terms of use")){J();return}}}if(o&&(o.text.includes("Does your business primarily serve children")||o.text.includes("Do you still need to comply with the Children's Online Privacy Protection Act")||o.text.includes("COPPA"))&&xe(e))return;if(o&&o.text.includes("I've set your business coppaCompliance to")&&(t.includes("coppa")||t.includes("compliance")||t.includes("children"))){n(!0),setTimeout(()=>{n(!1),i(a=>[...a,{text:"Would you like to adjust your COPPA compliance setting?",isUser:!1,ctaButtons:[{label:"Yes, Serves Children",onClick:()=>C(!0),variant:"secondary"},{label:"No, Does Not Serve Children",onClick:()=>C(!1),variant:"secondary"},{label:"Continue with Current Setting",onClick:()=>R(),variant:"primary"}]}])},800);return}if(_(o)){const a=be(o);if(a==="name"){S("name",e);return}else if(a==="email"){S("email",e);return}else if(a==="jurisdiction"){S("jurisdiction",e);return}else if(a==="website"&&w&&T==="terms"){u("Terms - Website URL",e,"terms_website_url");const c=document.querySelector('.terms-form input[placeholder="Company Name"]');j(c&&c.value||l.name,e,""),n(!0),setTimeout(()=>{n(!1),i(p=>[...p,{text:`Thanks! I've added "${e}" as your website URL. Could you please describe the services your business provides?`,isUser:!1,ctaButtons:void 0}])},800);return}else if(a==="services"&&w&&T==="terms"){u("Terms - Services Description",e,"terms_services_desc");const c=document.querySelector('.terms-form input[placeholder="Company Name"]'),p=document.querySelector('.terms-form input[placeholder="Website URL"]');c&&p&&j(c.value||l.name,p.value||"",e),n(!0),setTimeout(()=>{n(!1),i(W=>[...W,{text:"Thank you for providing your services description. Would you like to generate your Terms of Service now?",isUser:!1,ctaButtons:[{label:"Generate Terms",onClick:()=>se(),variant:"primary"},{label:"Edit More",onClick:()=>J(),variant:"secondary"}]}])},800);return}else if(o&&o.text.includes("Let's create Terms of Service from scratch")){u("Terms - Company Name",e,"terms_company_name"),j(e,"",""),n(!0),setTimeout(()=>{n(!1),i(c=>[...c,{text:`Thanks! I've set your business name to "${e}". What is your website URL? You can enter it in the form panel, or type your response below.`,isUser:!1,ctaButtons:void 0}])},800);return}else if(o&&(o.text.includes("I've set your business name to")||o.text.includes("I've updated your business name to")||o.text.includes("I've set your business email to")||o.text.includes("I've updated your business email to")||o.text.includes("I've updated your business jurisdiction to")||o.text.includes("I've set your business jurisdiction to")||o.text.includes("Thanks! I've set your business name to")||o.text.includes("Thanks! I've added")||o.text.includes("Thank you! I've set your business coppaCompliance to"))){n(!0),setTimeout(()=>{n(!1),i(c=>[...c,{text:"Is there anything else you'd like to update with your business information?",isUser:!1,ctaButtons:[{label:"Continue",onClick:()=>D(),variant:"primary"},{label:"Edit More Info",onClick:()=>I(),variant:"secondary"}]}])},800);return}}if(d){S(d,e);return}if(w&&T==="terms"&&o?.text.includes("What is your website URL")){u("Terms - Website URL",e,"terms_website_url");const a=document.querySelector('.terms-form input[placeholder="Company Name"]');j(a&&a.value||l.name,e,""),n(!0),setTimeout(()=>{n(!1),i(c=>[...c,{text:`Thanks! I've added "${e}" as your website URL. Could you please describe the services your business provides?`,isUser:!1,ctaButtons:void 0}])},800);return}const r=[...L].reverse().find(a=>!a.isUser&&a.ctaButtons&&a.ctaButtons.length>0);if(r?.ctaButtons&&!_(o)){const a=r.ctaButtons.find(c=>c.label.toLowerCase()===t);if(a){u(r.text,e,"button_response_exact_match"),a.onClick();return}else{const c=r.ctaButtons.find(p=>{const W=p.label.toLowerCase();return W.includes(t)||t.includes(W)});if(c){u(r.text,e,"button_response_partial_match"),c.onClick();return}}if((r.text.includes("Confirm that your business's legal jurisdiction is")||r.text.includes("confirm if the information shown")||r.text.includes("Does your business primarily serve children"))&&!_(o)){if(["yes","confirm","correct","ok","right","good","sure"].includes(t)){const c=r.ctaButtons.find(p=>p.label.toLowerCase()==="confirm"||p.label.toLowerCase()==="yes");if(c){u("Confirmed via text input",e,"text_confirmation"),c.onClick();return}}else if(["no","edit","change","update","wrong","incorrect"].includes(t)){const c=r.ctaButtons.find(p=>p.label.toLowerCase()==="edit"||p.label.toLowerCase()==="no");if(c){u("Edit requested via text input",e,"text_edit_request"),c.onClick();return}}else if(r.text.includes("jurisdiction")&&t!==l.jurisdiction.toLowerCase()){S("jurisdiction",e);return}}if(r.ctaButtons.some(c=>["yes","no","confirm","edit","generate policy","edit information","generate terms","edit more"].includes(c.label.toLowerCase()))&&!_(o)){if(["yes","confirm","correct","ok","right","good","sure","continue","proceed"].includes(t)){const c=r.ctaButtons.find(p=>["yes","confirm","continue","generate policy","generate terms"].includes(p.label.toLowerCase()));if(c){u("Confirmed yes via text input",e,"text_yes_confirmation"),c.onClick();return}}else if(["no","edit","change","update","wrong","incorrect","modify"].includes(t)){const c=r.ctaButtons.find(p=>["no","edit","edit information","edit more"].includes(p.label.toLowerCase()));if(c){u("Confirmed no via text input",e,"text_no_confirmation"),c.onClick();return}}else if(t.includes("generate")||t.includes("create")||t.includes("make")||t.includes("build")){const c=r.ctaButtons.find(p=>p.label.toLowerCase().includes("generate"));if(c){u("Generate requested via text input",e,"text_generate_request"),c.onClick();return}}else if(t.includes("edit")||t.includes("change")||t.includes("update")||t.includes("modify")){const c=r.ctaButtons.find(p=>p.label.toLowerCase().includes("edit"));if(c){u("Edit requested via text input",e,"text_edit_request"),c.onClick();return}}}}if(Ce(e))return;const{isCompliance:h,type:z}=ve(e);if(h){u("Compliance document requested",e,z||"general_compliance"),z==="privacy"?Y():z==="terms"&&q();return}(e.toLowerCase().includes("compliance")||e.toLowerCase().includes("legal")||e.toLowerCase().includes("regulation")||e.toLowerCase().includes("gdpr")||e.toLowerCase().includes("ccpa")||e.toLowerCase().includes("cookie")||e.toLowerCase().includes("consent"))&&u("General compliance query",e,"other_compliance"),n(!0),setTimeout(()=>{if(e.toLowerCase().includes("email"))i(a=>[...a,{text:"Please confirm your email is 'test@test.com'",isUser:!1,ctaButtons:[{label:"Yes",onClick:()=>te(!0)},{label:"No",onClick:()=>te(!1)}]}]);else{const a=ge(e);i(c=>[...c,{text:a,isUser:!1,ctaButtons:void 0}])}n(!1)},Math.random()*300+500)},Be=()=>w?s.jsxs("div",{className:"side-panel",children:[s.jsx("h2",{children:T==="privacy"?"Privacy Policy Generator":"Terms of Use Generator"}),s.jsx("div",{className:"generator-form",children:T==="privacy"?s.jsxs("div",{className:"privacy-form",children:[s.jsx("input",{type:"text",placeholder:"Company Name",className:"form-input"}),s.jsx("input",{type:"text",placeholder:"Website URL",className:"form-input"}),s.jsx("textarea",{placeholder:"Data Collection Description",className:"form-textarea"}),s.jsx("button",{className:"generate-button",onClick:()=>Te(),children:"Generate Privacy Policy"})]}):s.jsxs("div",{className:"terms-form",children:[s.jsx("input",{type:"text",placeholder:"Company Name",className:"form-input",onChange:e=>u("Terms - Company Name",e.target.value,"terms_company_name")}),s.jsx("input",{type:"text",placeholder:"Website URL",className:"form-input",onChange:e=>u("Terms - Website URL",e.target.value,"terms_website_url")}),s.jsx("textarea",{placeholder:"Services Description",className:"form-textarea",onChange:e=>u("Terms - Services Description",e.target.value,"terms_services_desc")}),s.jsx("button",{className:"generate-button",onClick:()=>se(),children:"Generate Terms of Use"})]})})]}):null,Ne=()=>{if(!B)return null;try{if($)return s.jsx("div",{className:"canvas-section",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Generating Privacy Policy"}),s.jsx(Ee,{})]})});if(k)try{const e=l.coppaCompliance;return s.jsx("div",{className:"canvas-section",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Generated Privacy Policy"}),s.jsxs("div",{className:"overflow-auto bg-gray-50 p-4 rounded",children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Sample Privacy Policy"}),s.jsxs("p",{className:"mb-3",children:["Last updated: ",new Date().toLocaleDateString()]}),s.jsx("p",{className:"mb-3",children:"This is a placeholder text for a privacy policy. The actual generation functionality has been replaced with this static content."}),s.jsx("h4",{className:"text-md font-medium mb-2",children:"Information We Collect"}),s.jsx("p",{className:"mb-3",children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl."}),e&&s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"text-md font-medium mb-2",children:"Children's Privacy (COPPA Compliance)"}),s.jsx("p",{className:"mb-3",children:"This site is directed to children under 13. In compliance with COPPA, we obtain parental consent before collecting personal information from children under 13."})]}),s.jsx("h4",{className:"text-md font-medium mb-2",children:"How We Use Your Information"}),s.jsx("p",{className:"mb-3",children:"Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit."}),s.jsx("h4",{className:"text-md font-medium mb-2",children:"Sharing Your Information"}),s.jsx("p",{className:"mb-3",children:"Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas sed diam eget risus varius blandit sit amet non magna."}),s.jsx("h4",{className:"text-md font-medium mb-2",children:"Contact Information"}),s.jsxs("p",{className:"mb-3",children:["For questions about this privacy policy or our data practices, please contact us at: ",l.email]}),s.jsx("h4",{className:"text-md font-medium mb-2",children:"Legal Jurisdiction"}),s.jsxs("p",{className:"mb-3",children:["This privacy policy is governed by the laws of ",l.jurisdiction,"."]}),s.jsx("p",{className:"mt-6 text-gray-500 text-sm",children:"This is a simplified template. For a complete privacy policy, please consult with a legal professional."})]}),s.jsxs("div",{className:"mt-6 mb-0 flex gap-3 justify-end",children:[s.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition-colors",children:"Download"}),s.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition-colors",children:"Copy"}),s.jsx("button",{className:"bg-black text-white px-4 py-2 rounded hover:bg-gray-900 transition-colors",children:"Email"})]})]})})}catch(e){console.error("Error rendering privacy policy:",e),g(!1)}if(d){let e="",t="",o="";if(d==="name")e="Business Name",t=l.name,o="Enter your business name";else if(d==="email")e="Business Email",t=l.email,o="Enter your business email";else if(d==="jurisdiction")e="Jurisdiction",t=l.jurisdiction,o="Illinois";else if(d==="coppaCompliance")return s.jsx("div",{className:"canvas-section",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6",children:"COPPA Compliance Information"}),s.jsx("div",{className:"space-y-6 overflow-auto",children:s.jsxs("div",{children:[s.jsx("p",{className:"block text-gray-700 mb-4",children:"The Children's Online Privacy Protection Act (COPPA) applies to websites and services directed to children under 13 years of age, and to general audience websites or online services with actual knowledge that they are collecting, using, or disclosing personal information from children under 13."}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-6",children:[s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Current Status:"}),s.jsx("p",{className:"text-md mb-2",children:"Does your business primarily serve children under 13?"}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:l.coppaCompliance?"Yes":"No"}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:()=>{M(!0),x(r=>({...r,coppaCompliance:!0}))},className:`text-left px-4 py-2 rounded border ${l.coppaCompliance?"bg-purple-100 border-purple-500":"bg-white border-gray-300 hover:bg-gray-50"}`,children:"Yes, we primarily serve children under 13"}),s.jsx("button",{onClick:()=>{M(!1),x(r=>({...r,coppaCompliance:!1}))},className:`text-left px-4 py-2 rounded border ${l.coppaCompliance?"bg-white border-gray-300 hover:bg-gray-50":"bg-purple-100 border-purple-500"}`,children:"No, we do not primarily serve children under 13"})]})]})]})}),s.jsx("div",{className:"mt-6 mb-0 flex gap-3 justify-end",children:s.jsx("button",{onClick:()=>{f(null),R()},className:"bg-black text-white px-6 py-2 rounded hover:bg-gray-900 transition-colors",children:"Continue"})})]})});return s.jsx("div",{className:"canvas-section",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6",children:["Edit ",e]}),s.jsx("div",{className:"space-y-6 overflow-auto",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:e}),s.jsx("input",{type:d==="email"?"email":"text",className:"form-input w-full",value:t,onChange:r=>{const m=r.target.value;d==="name"?x(h=>({...h,name:m})):d==="email"?x(h=>({...h,email:m})):d==="jurisdiction"&&x(h=>({...h,jurisdiction:m}))},placeholder:o})]})}),s.jsxs("div",{className:"mt-6 mb-0 flex gap-3 justify-end",children:[s.jsx("button",{onClick:he,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Back"}),s.jsx("button",{onClick:fe,className:"bg-black text-white px-6 py-2 rounded hover:bg-gray-900 transition-colors",children:"Save"})]})]})})}return s.jsx("div",{className:"canvas-section",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-8",children:"Privacy Policy Information"}),s.jsxs("div",{className:"space-y-4 overflow-auto",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-1",children:"Business Name"}),s.jsx("p",{className:"text-sm text-gray-500",children:l.name})]}),s.jsx("button",{onClick:()=>{f("name"),b(1)},className:"text-gray-400 hover:text-gray-600 transition-colors p-2","aria-label":"Edit business name",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-1",children:"Business Email"}),s.jsx("p",{className:"text-sm text-gray-500",children:l.email})]}),s.jsx("button",{onClick:()=>{f("email"),b(2)},className:"text-gray-400 hover:text-gray-600 transition-colors p-2","aria-label":"Edit business email",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-1",children:"Jurisdiction"}),s.jsx("p",{className:"text-sm text-gray-500",children:l.jurisdiction})]}),s.jsx("button",{onClick:()=>{f("jurisdiction"),b(3)},className:"text-gray-400 hover:text-gray-600 transition-colors p-2","aria-label":"Edit jurisdiction",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]}),s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium mb-1",children:"COPPA Compliance Needed"}),s.jsx("p",{className:"text-sm text-gray-500",children:l.coppaCompliance?"Yes":"No"})]}),s.jsx("button",{onClick:()=>P(),className:"text-gray-400 hover:text-gray-600 transition-colors p-2","aria-label":"Edit COPPA compliance",children:s.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})]}),s.jsx("div",{className:"mt-6 mb-0 flex justify-end",children:s.jsx("button",{onClick:D,className:"bg-black text-white px-6 py-2 rounded hover:bg-gray-900 transition-colors",children:"Confirm"})})]})})}catch(e){return console.error("Error in renderCanvas:",e),s.jsx("div",{className:"canvas-section",children:s.jsxs("div",{className:"p-6 h-full relative",children:[s.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Privacy Policy Information"}),s.jsx("p",{children:"There was an error displaying this content. Please try again."}),s.jsx("button",{onClick:()=>{g(!1),N(!1),f(null)},className:"bg-black text-white px-6 py-2 rounded hover:bg-gray-900 transition-colors mt-4",children:"Reset View"})]})})}},P=()=>{b(4),f("coppaCompliance"),v(!0),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Does your business primarily serve children under the age of 13?",isUser:!1,ctaButtons:[{label:"Yes",onClick:()=>M(!0),variant:"secondary"},{label:"No",onClick:()=>M(!1),variant:"secondary"},{label:"Why is this important?",onClick:()=>ke(),variant:"secondary"}]}])},800)},ke=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Why is this important?",isUser:!0,ctaButtons:void 0}]),u("Why is COPPA information important","User asked about importance of COPPA","coppa_explanation"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Businesses that primarily serve children under the age of 13, like daycares or schools, will require additional security language geared toward protecting their privacy, as part of the Children's Online Privacy Protection Act (COPPA).",isUser:!1,ctaButtons:void 0}]),setTimeout(()=>{n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Do you need to comply with the Children's Online Privacy Protection Act?",isUser:!1,ctaButtons:[{label:"Yes",onClick:()=>C(!0),variant:"secondary"},{label:"No",onClick:()=>C(!1),variant:"secondary"}]}])},800)},1500)},1e3)},M=e=>{i(t=>t.map(o=>({...o,ctaButtons:void 0}))),i(t=>[...t,{text:e?"Yes":"No",isUser:!0,ctaButtons:void 0}]),x(t=>({...t,coppaCompliance:e})),u("Does your business primarily serve children under 13?",e?"Yes":"No","serves_children"),v(!0),f("coppaCompliance"),e?(n(!0),setTimeout(()=>{n(!1),i(t=>[...t,{text:"Since your business primarily serves children under 13, I'll include appropriate COPPA compliance language in your privacy policy.",isUser:!1,ctaButtons:void 0}]),R()},1e3)):(n(!0),setTimeout(()=>{n(!1),i(t=>[...t,{text:"Do you still need to comply with the Children's Online Privacy Protection Act?",isUser:!1,ctaButtons:[{label:"Yes",onClick:()=>C(!0),variant:"secondary"},{label:"No",onClick:()=>C(!1),variant:"secondary"}]}])},800))},C=e=>{i(t=>t.map(o=>({...o,ctaButtons:void 0}))),i(t=>[...t,{text:e?"Yes":"No",isUser:!0,ctaButtons:void 0}]),x(t=>({...t,coppaCompliance:e})),v(!0),f("coppaCompliance"),u("COPPA Compliance Needed",e?"Yes":"No","coppa_compliance"),n(!0),setTimeout(()=>{n(!1),i(t=>[...t,{text:e?"I'll include COPPA compliance language in your privacy policy.":"No COPPA compliance language will be included in your privacy policy.",isUser:!1,ctaButtons:void 0}]),R()},800)},R=()=>{f(null),setTimeout(()=>{Pe()},800)},Pe=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Generate Policy",isUser:!0,ctaButtons:void 0}]),u("Privacy Policy generated",`Business: ${l.name}, COPPA Compliance: ${l.coppaCompliance?"Yes":"No"}`,"policy_generation"),v(!0),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Great! I'm generating your Privacy Policy now...",isUser:!1,ctaButtons:void 0}]),N(!0),f(null),setTimeout(()=>{N(!1),g(!0),setTimeout(()=>{n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"Your Privacy Policy has been generated successfully! You can view it in the panel on the right.",isUser:!1,ctaButtons:[{label:"Edit Information",onClick:()=>I(),variant:"secondary"}]}])},800)},500)},2e3)},800)},Te=()=>{const e=document.querySelector('.privacy-form input[placeholder="Company Name"]'),t=document.querySelector('.privacy-form input[placeholder="Website URL"]'),o=document.querySelector(".privacy-form textarea");if(e&&t){const r=e.value||l.name,m=t.value||"your website";o?.value,u("Privacy Policy form submitted",`Company: ${r}, Website: ${m}`,"privacy_form_submission"),x(h=>({...h,name:r})),A(!1),O(null),v(!0),i(h=>[...h,{text:`Great! I've generated a Privacy Policy for ${r}.`,isUser:!1,ctaButtons:void 0}]),g(!0)}},se=()=>{i(e=>e.map(t=>({...t,ctaButtons:void 0}))),i(e=>[...e,{text:"Generate Terms",isUser:!0,ctaButtons:void 0}]),u("Terms of Service generated","Generated from form data","terms_generation"),n(!0),setTimeout(()=>{n(!1),i(e=>[...e,{text:"I've generated your Terms of Service based on the information provided. You can download the document or make further edits.",isUser:!1,ctaButtons:[{label:"Download Terms",onClick:()=>alert("Terms document downloaded"),variant:"primary"},{label:"Edit More",onClick:()=>J(),variant:"secondary"}]}])},1e3)};return s.jsx("div",{className:"overlay",children:s.jsxs("div",{className:"chat-container",children:[s.jsx("button",{className:"close-button","aria-label":"Close chat",children:s.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",children:s.jsx("path",{d:"M13 1L1 13M1 1L13 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}),s.jsx(Ue,{}),s.jsxs("div",{className:`split-container ${w?"with-side-panel":""} ${B?"with-canvas":""} ${oe?"canvas-animating":""}`,children:[s.jsxs("div",{className:"chat-section",children:[s.jsx(Se,{messages:L}),ne&&s.jsx(Le,{}),s.jsx(Ie,{onSendMessage:we})]}),B&&Ne(),Be()]})]})})}export{qe as default};
